<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
        <link rel="stylesheet" href="../css/style.css"/>
         <link rel="stylesheet" href="template/style.css"/>
    </h:head>
    <h:body>
        <ui:include src="../view/template/sideBar.xhtml"/>
        <section>
        <div class="header">
           
            <h1>#{detallesdeentradaController.user.ID_empresas.nombre}</h1>
        </div>

        <div class="topnav">

        </div>

        <div class="row">
            <div class="leftcolumn">
                <div class="card">
                    <p:panel id="horizontal" style="
                             text-align: center;; width: 300px" header="Detalles De entrada" toggleOrientation="horizontal">
                        <h:panelGrid columns="2" cellpadding="10">
                            <h:form>
                                <h:panelGrid columns="1">

                                            <p:outputLabel value="Fecha de Ingreso"/>
                                            <p:calendar pattern="yyyy-MM-dd" value="#{detallesdeentradaController.detalles.fecha_ingreso}" style="width: 250px"/>

                                            <p:outputLabel value="Precio de Ingreso"/>
                                            <p:inputText value="#{detallesdeentradaController.detalles.precio_ingreso}" style="width: 250px"/>      

                                            <p:outputLabel value="Estado"/>
                                            <p:inputText value="#{detallesdeentradaController.detalles.estado}" style="width: 250px"/>

                                            <p:outputLabel value="Descripcion"/>
                                            <p:inputText value="#{detallesdeentradaController.detalles.descipcion}" style="width: 250px"/>

                                          
                                 <h:panelGrid columns="2">
                                        <p:commandButton value="Guardar" actionListener="#{detallesdeentradaController.guardar()}" update=":data"/>
                                        <p:commandButton value="mostrar" actionListener="#{detallesdeentradaController.consultarAll()}" update=":data"/>   
                                    </h:panelGrid>
                                </h:panelGrid>
                            </h:form>

                        </h:panelGrid>
                    </p:panel>
                </div>
            </div>

            <div class="rightcolumn">

  <p:dataTable value="#{detallesdeentradaController.lista}" var="lis" id="data">

           
            <p:column headerText="Fecha de Ingreso">
                <h:outputText value="#{lis.fecha_ingreso}">
                <f:convertDateTime type="date"/>
                </h:outputText>
            </p:column>

            <p:column headerText="Precio de Ingreso">
                <p:outputLabel value="#{lis.precio_ingreso}"/>
            </p:column>            
            
            <p:column headerText="Estado">
                <p:outputLabel value="#{lis.estado}"/>
            </p:column>
            
            <p:column headerText="Descripcion">
                <p:outputLabel value="#{lis.descipcion}"/>
            </p:column>
            
            <p:column headerText="Empresas">
                <p:outputLabel value="#{lis.ID_empresas.nombre}"/>
            </p:column>

            <p:column headerText="Acciones">
                <p:commandButton value="Eliminar" actionListener="#{detallesdeentradaController.eliminar(lis)}" update="data"/> 
                <p:commandButton value="editar" actionListener="#{detallesdeentradaController.leerId(lis)}" update=":wgdatos" oncomplete="PF('w').show();"/> 
            </p:column>

        </p:dataTable>

        <p:dialog widgetVar="w" header="Datos" id="wgdatos">
            <h:form id="panel">
                <p:fieldset legend="Nombre">
                    <h:panelGrid columns="2">                         
                            <p:outputLabel value="Fecha de Ingreso"/>
                            <p:calendar pattern="yyyy-MM-dd" value="#{detallesdeentradaController.detalles.fecha_ingreso}" style="width: 250px"/>

                            <p:outputLabel value="Precio de Ingreso"/>
                            <p:inputText value="#{detallesdeentradaController.detalles.precio_ingreso}" style="width: 250px"/>      
                            
                            <p:outputLabel value="Estado"/>
                            <p:inputText value="#{detallesdeentradaController.detalles.estado}" style="width: 250px"/>
                            
                            <p:outputLabel value="Descripcion"/>
                            <p:inputText value="#{detallesdeentradaController.detalles.descipcion}" style="width: 250px"/>

                        
                        </h:panelGrid>                    
                </p:fieldset>

                <p:commandButton value="Editar" style="display: inherit" actionListener="#{detallesdeentradaController.actualizar()}" oncomplete="PF('w').hide();" update=":data ">
                    <p:effect type="puff" event="click" for="">                            
                    </p:effect>
                </p:commandButton>
            </h:form>
        </p:dialog>
             


            </div>
        </div>

      
            </section>
        <div class="footer">
            <h2>Footer</h2>
        </div>
  
    </h:body>
</html>

